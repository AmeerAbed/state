<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <title>Up, Down</title>
  <style>
    .centered {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
    }
  </style>
  <script id='data'>
    const numbers = {
      current: 0,
      past: []
    }
  </script>
  <script id='log'>
    const log = [];
  </script>
  <script id='init'>
    window.onload = () => {
      log.push({ initialNumbers: JSON.parse(JSON.stringify(numbers)) });
      document.getElementById('current-number').innerHTML = numbers.current;
    }
  </script>
</head>

<body>
  <section id='user-interface' class='centered'>
    <code id='current-number'></code> <br>
    <button id='plus-one'>+</button>
    <button id='minus-one'>-</button>
    <br>
    <button id='reset'>reset</button>
  </section>

  <script id='stories'>
    function up() {
      numbers.past.push(numbers.current);
      numbers.current += 1;
      document.getElementById('current-number').innerHTML = numbers.current;
      log.push({
        userStory: 'up',
        numbers: JSON.parse(JSON.stringify(numbers))
      });
    }
    document.getElementById('plus-one').addEventListener('click', up);

    function down() {
      numbers.past.push(numbers.current);
      numbers.current -= 1;
      document.getElementById('current-number').innerHTML = numbers.current;
      log.push({
        userStory: 'down',
        numbers: JSON.parse(JSON.stringify(numbers))
      });
    }
    document.getElementById('minus-one').addEventListener('click', down);

    function resetHandler() {
      // resetting state
      numbers.current = 0;
      numbers.past = [];

      // rerender UI based on state
      document.getElementById('current-number').innerHTML = numbers.current;

      // log user interaction
      log.push({
        userStory: 'reset',
        numbers: JSON.parse(JSON.stringify(numbers))
      })
    }
    document.getElementById('reset').addEventListener('click', resetHandler);
  </script>
</body>

</html>
